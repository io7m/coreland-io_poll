local: tools sources io_poll.a
local_clean: toollink_clean sources_clean

tools: cc-compile cc-link cc-slib \
	conf-cc conf-ld rebuild-flag conf-cctype  \
	conf-systype

toollink_clean:
	@rm -f cc-compile cc-link cc-slib conf-cc conf-ld conf-cctype  \
	conf-systype rebuild-flag

conf-cc: ../../conf-cc
	@echo symlink conf-cc
	@rm -f conf-cc
	@ln -s ../../conf-cc conf-cc
conf-ld: ../../conf-ld
	@echo symlink conf-ld
	@rm -f conf-ld
	@ln -s ../../conf-ld conf-ld
conf-cctype: ../../conf-cctype
	@echo symlink conf-cctype
	@rm -f conf-cctype
	@ln -s ../../conf-cctype conf-cctype
conf-systype: ../../conf-systype
	@echo symlink conf-systype
	@rm -f conf-systype
	@ln -s ../../conf-systype conf-systype

cc-compile: ../../cc-compile conf-cc conf-ccfflist \
	flags-sysspec ../../flags-corelib
	@echo symlink cc-compile
	@rm -f cc-compile
	@ln -s ../../cc-compile cc-compile

cc-link: ../../cc-link conf-ld 
	@echo symlink cc-link
	@rm -f cc-link
	@ln -s ../../cc-link cc-link

cc-slib: ../../cc-slib 
	@echo symlink cc-slib
	@rm -f cc-slib
	@ln -s ../../cc-slib cc-slib

rebuild-flag:
	@touch rebuild-flag

#--src--#

io_poll-conf.c: ../../io_poll-conf.c rebuild-flag
	@echo symlink io_poll-conf.c
	@rm -f io_poll-conf.c
	@ln -s ../../io_poll-conf.c io_poll-conf.c

io_poll_add.c: ../../io_poll_add.c rebuild-flag
	@echo symlink io_poll_add.c
	@rm -f io_poll_add.c
	@ln -s ../../io_poll_add.c io_poll_add.c

io_poll_fdh.c: ../../io_poll_fdh.c rebuild-flag
	@echo symlink io_poll_fdh.c
	@rm -f io_poll_fdh.c
	@ln -s ../../io_poll_fdh.c io_poll_fdh.c

io_poll_flgt.c: ../../io_poll_flgt.c rebuild-flag
	@echo symlink io_poll_flgt.c
	@rm -f io_poll_flgt.c
	@ln -s ../../io_poll_flgt.c io_poll_flgt.c

io_poll_free.c: ../../io_poll_free.c rebuild-flag
	@echo symlink io_poll_free.c
	@rm -f io_poll_free.c
	@ln -s ../../io_poll_free.c io_poll_free.c

io_poll_init.c: ../../io_poll_init.c rebuild-flag
	@echo symlink io_poll_init.c
	@rm -f io_poll_init.c
	@ln -s ../../io_poll_init.c io_poll_init.c

io_poll_iom.c: ../../io_poll_iom.c rebuild-flag
	@echo symlink io_poll_iom.c
	@rm -f io_poll_iom.c
	@ln -s ../../io_poll_iom.c io_poll_iom.c

io_poll_reg.c: ../../io_poll_reg.c rebuild-flag
	@echo symlink io_poll_reg.c
	@rm -f io_poll_reg.c
	@ln -s ../../io_poll_reg.c io_poll_reg.c

io_poll_rm.c: ../../io_poll_rm.c rebuild-flag
	@echo symlink io_poll_rm.c
	@rm -f io_poll_rm.c
	@ln -s ../../io_poll_rm.c io_poll_rm.c

io_poll_wait.c: ../../io_poll_wait.c rebuild-flag
	@echo symlink io_poll_wait.c
	@rm -f io_poll_wait.c
	@ln -s ../../io_poll_wait.c io_poll_wait.c

_aio-mech.h: ../../_aio-mech.h rebuild-flag
	@echo symlink _aio-mech.h
	@rm -f _aio-mech.h
	@ln -s ../../_aio-mech.h _aio-mech.h
_sd_select.h: ../../_sd_select.h rebuild-flag
	@echo symlink _sd_select.h
	@rm -f _sd_select.h
	@ln -s ../../_sd_select.h _sd_select.h
aio-mech.h: ../../aio-mech.h rebuild-flag
	@echo symlink aio-mech.h
	@rm -f aio-mech.h
	@ln -s ../../aio-mech.h aio-mech.h
ctxt.h: ../../ctxt.h rebuild-flag
	@echo symlink ctxt.h
	@rm -f ctxt.h
	@ln -s ../../ctxt.h ctxt.h
install.h: ../../install.h rebuild-flag
	@echo symlink install.h
	@rm -f install.h
	@ln -s ../../install.h install.h
io_poll.h: ../../io_poll.h rebuild-flag
	@echo symlink io_poll.h
	@rm -f io_poll.h
	@ln -s ../../io_poll.h io_poll.h
io_poll_fdh.h: ../../io_poll_fdh.h rebuild-flag
	@echo symlink io_poll_fdh.h
	@rm -f io_poll_fdh.h
	@ln -s ../../io_poll_fdh.h io_poll_fdh.h
select.h: ../../select.h rebuild-flag
	@echo symlink select.h
	@rm -f select.h
	@ln -s ../../select.h select.h
sources_clean: 
	rm -f  io_poll-conf.c io_poll_add.c io_poll_fdh.c io_poll_flgt.c io_poll_free.c io_poll_init.c io_poll_iom.c io_poll_reg.c io_poll_rm.c io_poll_wait.c  _aio-mech.h _sd_select.h aio-mech.h ctxt.h install.h io_poll.h io_poll_fdh.h select.h
	touch  io_poll-conf.c io_poll_add.c io_poll_fdh.c io_poll_flgt.c io_poll_free.c io_poll_init.c io_poll_iom.c io_poll_reg.c io_poll_rm.c io_poll_wait.c
sources:  io_poll-conf.c io_poll_add.c io_poll_fdh.c io_poll_flgt.c io_poll_free.c io_poll_init.c io_poll_iom.c io_poll_reg.c io_poll_rm.c io_poll_wait.c  _aio-mech.h _sd_select.h aio-mech.h ctxt.h install.h io_poll.h io_poll_fdh.h select.h
